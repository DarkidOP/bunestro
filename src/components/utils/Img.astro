---
import { Skeleton } from "@/components/ui/skeleton";
import { cn } from "@/lib/utils";

interface Props {
  src: string;
  alt: string;
  width: number;
  height: number;
  className?: string;
}

const { src, alt, width, height, className = "" } = Astro.props;
const aspectRatio = `${width} / ${height}`;
---

<div
  class={cn("relative w-full overflow-hidden", className)}
  style={{
    aspectRatio: aspectRatio,
    maxWidth: `${width}px`,
  }}
>
  <Skeleton className="absolute top-0 left-0 w-full h-full rounded-none" />
  <img
    src={src}
    alt={alt}
    width={width}
    height={height}
    class="absolute top-0 left-0 w-full h-full object-cover opacity-0 transition-opacity duration-300 img_custom_lazy_loading"
    loading="lazy"
    onload="this.classList.remove('opacity-0')"
  />
</div>
